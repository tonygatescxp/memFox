/*
 * JSP generated by Resin-3.1.12 (built Mon, 29 Aug 2011 03:22:08 PDT)
 */

package _jsp;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;

public class _memfox_0reporttemplate__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;
  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = _jsp_application.getJspApplicationContext().allocatePageContext(this, _jsp_application, request, response, null, null, 8192, true, false);
    javax.servlet.jsp.PageContext _jsp_parentContext = pageContext;
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html;charset=UTF-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_application.getJspApplicationContext().freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.server.util.CauchoSystem.getVersionId() != 7170261747151080670L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.vfs.Dependency depend;
      depend = (com.caucho.vfs.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void init(ServletConfig config)
    throws ServletException
  {
    com.caucho.server.webapp.WebApp webApp
      = (com.caucho.server.webapp.WebApp) config.getServletContext();
    super.init(config);
    com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
    com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.PageContextImpl(webApp, this);
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("memFox_reportTemplate.jsp"), -6494059912100059890L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string0;
  static {
    _jsp_string0 = "\r\n\r\n<html>\r\n  <head><title></title>\r\n      <script type=\"text/javascript\" src=\"js/jquery-1.7.2.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"js/bootstrap/js/bootstrap.min.js\"></script>\r\n    <link rel=\"stylesheet\" href=\"js/bootstrap/css/bootstrap.min.css\">\r\n      <script type=\"text/javascript\" src=\"js/highcharts/highcharts.js\"></script>\r\n      <script type=\"text/javascript\" src=\"js/public-function.js\"></script>\r\n\r\n      <script type=\"text/javascript\">\r\n          $(document).ready(function(){\r\n              $('#pieChart').highcharts({\r\n                      chart: {\r\n                            plotBackgroundColor: null,\r\n                            plotBorderWidth: null,\r\n                            plotShadow: false,\r\n                            height: 360\r\n                        },\r\n                        title: {\r\n                            text: ''\r\n                        },\r\n                        tooltip: {\r\n                            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\r\n                        },\r\n                        plotOptions: {\r\n                            pie: {\r\n                                allowPointSelect: true,\r\n                                cursor: 'pointer',\r\n                                dataLabels: {\r\n                                    enabled: true,\r\n                                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',\r\n                                    style: {\r\n                                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'\r\n                                    }\r\n                                }\r\n                            }\r\n                        },\r\n                        series: [{\r\n                            type: 'pie',\r\n                            name: 'SpaceUsed',\r\n                            data: [{name :'null', y:100, color: '#5B9BD5'}]\r\n                        }\r\n                        ]\r\n                      });\r\n\r\n              initPage();\r\n\r\n          });\r\n\r\n          function initPage()\r\n          {\r\n               var groupName=getQueryString(\"groupName\");\r\n               var hostName=getQueryString(\"hostName\");\r\n               var hostIP=getQueryString(\"hostIP\");\r\n               var hostPort=getQueryString(\"hostPort\");\r\n               showMemcachedInfo(groupName, hostName, hostIP, hostPort);\r\n          }\r\n\r\n          function showMemcachedInfo(vGroupName, vHostName, vHostIP, vHostPort)\r\n          {\r\n              var gName=vGroupName;\r\n              var hIP=vHostIP;\r\n              var hPort=vHostPort;\r\n\r\n              $.ajax({\r\n                   type: 'get',\r\n                   url: \"/memFox/servlet/getStatus?val=type=getHostData;group=\" + gName + \";hostIP=\" + hIP + \";hostPort=\" + hPort ,\r\n                   success: function(data, status){\r\n                       var hostData = eval(data);\r\n                        tbl_info_chunkssize.innerHTML = strFormatNumber(hostData[0].chunk_size,0);\r\n                        tbl_info_chunksperpage.innerHTML = strFormatNumber(hostData[0].chunks_per_page, 0);\r\n                        tbl_info_chunksinfo.innerHTML = strFormatNumber(hostData[0].used_chunks,0) + \" / \" + strFormatNumber(hostData[0].free_chunks,0) + \" / \" + strFormatNumber(hostData[0].total_chunks, 0);\r\n                        tbl_info_items.innerHTML = strFormatNumber(hostData[0].total_items,0);\r\n                        tbl_info_pages.innerHTML = strFormatNumber(hostData[0].total_pages, 0);\r\n                        tbl_info_eviction.innerHTML = strFormatNumber(hostData[0].evictions, 0);\r\n                        tbl_info_cmd_get.innerHTML = strFormatNumber(hostData[0].cmd_get, 0);\r\n                        tbl_info_cmd_set.innerHTML = strFormatNumber(hostData[0].cmd_set, 0);\r\n                        tbl_info_threads.innerHTML = strFormatNumber(hostData[0].threads, 0);\r\n                        tbl_info_connections.innerHTML = strFormatNumber(hostData[0].curr_connections,0);\r\n                        tbl_info_get_hits.innerHTML = strFormatNumber(hostData[0].get_hits, 0);\r\n                        tbl_info_get_misses.innerHTML = strFormatNumber(hostData[0].get_misses, 0);\r\n                        tbl_info_total_size.innerHTML = strFormatNumber(hostData[0].limit_maxbytes/1024/1024/1024, 2) + \" GB\";\r\n                        tbl_info_total_malloced.innerHTML = strFormatNumber(hostData[0].bytes/1024/1024/1024, 2) + \" GB\";\r\n\r\n                       reloadPieChart(hostData[0].bytes, hostData[0].limit_maxbytes - hostData[0].bytes,\r\n                                        hostData[0].cmd_set, hostData[0].cmd_get,\r\n                                        hostData[0].get_hits, hostData[0].get_misses );\r\n                   }\r\n              });\r\n          }\r\n\r\n          function reloadPieChart(pUsed, pFree, pSet, pGet, pHits, pMisses)\r\n          {\r\n              var vPieChart = $('#pieChart').highcharts();\r\n              vPieChart.showLoading('\u6570\u636e\u52a0\u8f7d\u4e2d');\r\n              while(vPieChart.series.length){\r\n                  vPieChart.series[0].remove();\r\n              }\r\n\r\n              var SpaceValue=eval(\"[{name:'Used', y:\"+pUsed+\", color:'#5B9BD5'},{name:'Free', y:\"+pFree+\", color: '#ED1C24'}]\");\r\n              var OperatValue=eval(\"[{name:'Set', y:\"+pSet+\", color:'#70AD47'},{name:'Get', y:\"+pGet+\", color: '#ED7D31'}]\");\r\n              var CachedValue=eval(\"[{name:'Hits', y:\"+pHits+\", color:'#7FFF00'},{name:'Misses', y:\"+pMisses+\", color: '#808000'}]\");\r\n\r\n              vPieChart.addSeries({name: '\u7a7a\u95f4\u4f7f\u7528\u7387',type: 'pie', data: SpaceValue });\r\n              vPieChart.addSeries({name: '\u64cd\u4f5c\u4f7f\u7528\u7387',type: 'pie',size: 180, data: OperatValue });\r\n              vPieChart.addSeries({name: '\u7f13\u5b58\u547d\u4e2d\u7387',type: 'pie',size: 90, data: CachedValue });\r\n\r\n              vPieChart.hideLoading();\r\n          }\r\n      </script>\r\n  </head>\r\n\r\n<body >\r\n    <div width=\"100%\">\r\n        <table width=\"100%\" align=\"center\">\r\n            <tr>\r\n                <td>\r\n                    <div class=\"container theme-showcase\" align=\"center\" style=\"width:100%; height:100%\">\r\n                        <div class=\"panel\">\r\n                                <table class=\"table table-striped table-bordered text-center\">\r\n                                   <tr>\r\n                                       <td colspan=\"4\" width=\"820px\" bgcolor=\"\"><span class=\"glyphicon glyphicon-exclamation-sign\"></span><strong>Memcached\u4fe1\u606f</strong></td>\r\n                                       <td width=\"450px\"><span class=\"glyphicon glyphicon-indent-left\"></span><strong>\u5206\u6790\u56fe</strong></td>\r\n                                   </tr>\r\n                                   <tr>\r\n                                       <td>chunks\u5927\u5c0f</td><td><div id=\"tbl_info_chunkssize\" ></div></td>\r\n                                       <td>\u6bcf\u9875chunks\u6570</td><td><div id=\"tbl_info_chunksperpage\" ></div></td>\r\n                                       <td rowspan=\"10\">\r\n                                            <div id=\"pieChart\"></div>\r\n                                       </td>\r\n                                   </tr>\r\n                                   <tr>\r\n                                       <td colspan=\"2\">chunks \u5df2\u7528\u6570/\u53ef\u7528\u6570/\u603b\u6570</td>\r\n                                       <td colspan=\"2\"><div><div id=\"tbl_info_chunksinfo\"></div></div></td>\r\n                                   </tr>\r\n                                   <tr>\r\n                                       <td>\u6570\u636e\u91cf\uff08items\uff09</td><td><div id=\"tbl_info_items\"></div></td>\r\n                                       <td>\u9875\u9762\u6570\uff08pages\uff09</td><td><div id=\"tbl_info_pages\"></div></td>\r\n                                   </tr>\r\n                                   <tr>\r\n                                       <td colspan=\"2\">\u6dd8\u6c70\u91cf\uff08evictions\uff09</td><td colspan=\"2\"><div id=\"tbl_info_eviction\"></div></td>\r\n                                   </tr>\r\n                                   <tr>\r\n                                       <td>\u7ebf\u7a0b\uff08Threads\uff09</td><td><div id=\"tbl_info_threads\"></div></td>\r\n                                       <td>\u8fde\u63a5\u6570\uff08Connections\uff09</td><td><div id=\"tbl_info_connections\"></div></td>\r\n                                   </tr>\r\n                                   <tr>\r\n                                       <td colspan=\"4\"><font color=\"white\">-</font></td>\r\n                                   </tr>\r\n                                   <tr>\r\n                                       <td>get\u6b21\u6570</td><td><div id=\"tbl_info_cmd_get\"></div></td>\r\n                                       <td>set\u6b21\u6570</td><td><div id=\"tbl_info_cmd_set\"></div></td>\r\n                                   </tr>\r\n                                   <tr>\r\n                                       <td>get\u547d\u4e2d\u6b21\u6570</td><td><div id=\"tbl_info_get_hits\"></div></td>\r\n                                       <td>get\u672a\u547d\u4e2d\u6b21\u6570</td><td><div id=\"tbl_info_get_misses\"></div></td>\r\n                                   </tr>\r\n                                   <tr>\r\n                                       <td>\u603b\u7a7a\u95f4</td><td><div id=\"tbl_info_total_size\"></div></td>\r\n                                       <td>\u7a7a\u95f4\u5df2\u5206\u914d</td><td><div id=\"tbl_info_total_malloced\"></div></td>\r\n                                   </tr>\r\n                               </table>\r\n                        </div>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n    </div>\r\n\r\n</body>\r\n</html>".toCharArray();
  }
}
